jQuery.fn.flow=function(a){if(typeof jQuery.fn.everyTime!="function"){return}var d=this;var b=jQuery.extend({template:{},start:0,delay:"1s",minItems:2,times:0,updates:{},reverse:false},a);if(typeof b.updates=="string"&&jQuery.flow.isUrl(b.updates)){b.updates={url:b.updates,dataType:"json"}}if(typeof b.updates!="object"&&typeof b.updates!="function"){return}var c=false;switch(typeof b.template){case"string":if(jQuery.flow.isUrl(b.template)){b.template={url:b.template}}else{c=true;break}case"object":jQuery.ajax(jQuery.extend(b.template,{success:function(e){b.template=e;d.each(function(f,g){g.flow=jQuery.extend(g.flow,{initialized:true})})}}));break;case"function":c=true;break;default:return}if(typeof jQuery.fn.flow.stop!="function"){jQuery.fn.flow.stop=function(){d.each(function(f,e){if(typeof e.flow!="undefined"&&typeof e.flow.stop=="function"){e.flow.stop()}})}}if(typeof jQuery.fn.flow.resume!="function"){jQuery.fn.flow.resume=function(){d.each(function(f,e){if(typeof e.flow!="undefined"&&typeof e.flow.resume=="function"){e.flow.resume()}})}}if(typeof jQuery.fn.flow.toggle!="function"){jQuery.fn.flow.toggle=function(){d.each(function(f,e){if(typeof e.flow=="object"&&typeof e.flow.toggle=="function"){e.flow.toggle()}})}}this.each(function(f,e){e.flow=jQuery.extend(e.flow,{settings:b,flowing:false,queue:[]});if(typeof e.flow.settings.numItems=="undefined"){e.flow.settings.numItems=jQuery(e).children().length}if(e.flow.settings.numItems<0){e.flow.settings.numItems=0}if(!e.flow.initialized){e.flow.initialized=c}e.flow.action=function(){if(!e.flow.initialized){return}if(typeof e.flow.settings.template!="string"&&typeof e.flow.settings.template!="function"){return}if(e.flow.queue.length<=e.flow.settings.minItems){switch(typeof e.flow.settings.updates){case"object":jQuery.ajax(jQuery.extend(e.flow.settings.updates,{success:function(k){jQuery.flow.update(e,k)}}));break;case"function":var l=e.flow.settings.updates.call(e);if(typeof l=="object"){jQuery.flow.update(e,l)}break;default:return}}if(e.flow.queue.length>0){var j=e.flow.queue.shift();var m=false;if(typeof e.flow.settings.template=="function"){m=e.flow.settings.template.call(e,j)}else{if(typeof e.flow.settings.template=="string"){m=e.flow.settings.template;for(var g in j){m=m.replace("#{"+g+"}",j[g])}}}if(m){var i=jQuery(e).children();var h=-1;if(e.flow.settings.reverse){h=i.length-1-e.flow.settings.start;if(i[h]){jQuery(m).insertAfter(i[h]);h+=1}else{jQuery(e).prepend(m);h=0}}else{h=e.flow.settings.start;if(i[h]){jQuery(m).insertBefore(i[h])}else{jQuery(e).append(m);h=i.length}}if(h!=-1){jQuery(e).children()[h].flowObject=j;if(typeof e.flow.settings.appearEffect=="object"){jQuery(jQuery(e).children()[h]).animate(e.flow.settings.appearEffect[0],0);jQuery(jQuery(e).children()[h]).hide();jQuery(jQuery(e).children()[h]).animate(e.flow.settings.appearEffect[0],e.flow.settings.appearEffect[1],e.flow.settings.appearEffect[2],e.flow.settings.appearEffect[3])}}}}if(e.flow.settings.numItems!=0&&jQuery(e).children().length>e.flow.settings.numItems){var h=e.flow.settings.reverse?(jQuery(e).children().length-e.flow.settings.numItems-1):e.flow.settings.numItems;while(h>=0&&h<jQuery(e).children().length){if(typeof e.flow.settings.disappearEffect=="object"){jQuery(jQuery(e).children()[h]).animate(e.flow.settings.disappearEffect[0],e.flow.settings.disappearEffect[1],e.flow.settings.disappearEffect[2],function(){if(typeof e.flow.settings.disappearEffect[3]=="function"){e.flow.settings.disappearEffect[3].call(this)}jQuery(this).remove()})}else{jQuery(jQuery(e).children()[h]).remove()}h+=e.flow.settings.reverse?-1:1}}if(typeof e.flow.settings.callback=="function"){jQuery(e).children().each(function(n,k){e.flow.settings.callback.call(k,n,k.flowObject)})}};e.flow.resume=function(){if(this.flowing){return}this.flowing=true;jQuery(e).everyTime(this.settings.delay,e,this.action,this.settings.times)};e.flow.stop=function(){if(!this.flowing){return}this.flowing=false;jQuery(e).stopTime(e)};e.flow.toggle=function(){if(this.flowing){this.stop()}else{this.resume()}};jQuery(e).children().each(function(g,h){if(typeof h.flowObject=="object"){return}var j={};if(typeof e.flow.settings.flowObject=="function"){j=e.flow.settings.flowObject(g,h)}if(typeof j!="object"){j={}}j.flowTimestamp=new Date().getTime();h.flowObject=j})});this.flow.resume()};jQuery.extend({flow:{isUrl:function(a){return/^[^\r\n<>]{1,100}$/.test(a)},update:function(d,a){if(typeof a!="object"){return}for(var c in a){if(typeof a[c]!="object"){continue}var e=false;for(var b in d.flow.queue){if(typeof a[c]._!="undefined"&&typeof d.flow.queue[b]._!="undefined"&&a[c]._==d.flow.queue[b]._){e=true;break}}if(e){continue}a[c].flowTimestamp=new Date().getTime();d.flow.queue.push(a[c])}}}});